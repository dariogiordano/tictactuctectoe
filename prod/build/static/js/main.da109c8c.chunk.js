(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{51:function(e,t,n){e.exports=n(97)},93:function(e,t){},97:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(23),i=n.n(o),c=n(9),s=n(10),l=n(12),u=n(11),h=n(13),m=n(99),p=n(100),d=n(5),v=n(6);function f(){var e=Object(d.a)(["\n  font-size: 1.5em;\n  color: ",";\n  &:hover {\n    cursor: pointer;\n    color: #6cc0e5;\n  }\n"]);return f=function(){return e},e}var b=v.a.h2(f(),function(e){return e.color}),g=n(17),y=n(98),w=function(){return r.a.createElement("div",null,r.a.createElement(g.Helmet,null,r.a.createElement("title",null,"Home")),r.a.createElement(b,{color:"blue"},"Home "),r.a.createElement(y.a,{to:"/play"},"Play"))},k=n(49),E=n(8),O=n(14),j=n(47),S=n.n(j);function N(){var e=Object(d.a)(["\n  display: inline-block;\n  width: 28px;\n  height: 28px;\n  text-align: center;\n  line-height: 30px;\n  border: 1px solid #ddd;\n  color: ",";\n  ",";\n  ",";\n  &:hover {\n    ",";\n    ",";\n  }\n"]);return N=function(){return e},e}var x=v.a.div(N(),function(e){return e.color},function(e){return e.usable&&"\n   background: rgba(0,0,0,0.05); \n   "},function(e){return e.filled&&"\n   background: transparent; \n   "},function(e){return e.usable&&"cursor: pointer;\n     background: rgba(0,255,0,0.5); \n     "},function(e){return e.filled&&"\n     background: transparent; \n     "}),I=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(O.a)(Object(O.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(){this.props.usable&&"empty"===this.props.status&&this.props.onCellClick(this.props.vIndex,this.props.hIndex)}},{key:"render",value:function(){return r.a.createElement(x,{filled:"empty"!==this.props.status,usable:this.props.usable,onClick:this.handleChange},"empty"===this.props.status?" ":this.props.status)}}]),t}(r.a.Component);function P(){var e=Object(d.a)(["\n  display: flex;\n  align-items: center;\n"]);return P=function(){return e},e}var W=v.a.div(P());function C(){var e=Object(d.a)(["\n  display: inline-block;\n"]);return C=function(){return e},e}var R=v.a.div(C()),H=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={myPlayer:null,actualPlayer:null,grid:[],matchStatus:null,roomName:n.props.roomName},n.togglePlayer=n.togglePlayer.bind(Object(O.a)(Object(O.a)(n))),n.socket=S()("http://localhost:3000"),n.socket.on("set my player",function(e){console.log(e),e&&n.setState(function(t){return{roomName:e}})}),n.socket.on("left alone",function(){n.props.history.push("/quitted/")}),n.socket.on("update",function(e){"won"!==n.state.matchStatus&&n.setState(function(){return{grid:e.grid,actualPlayer:e.actualPlayer,matchStatus:e.matchStatus}})}),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"getNewItemIndexes",value:function(e,t,n){switch(n){case"NW":e--,t--;break;case"N":e--;break;case"NE":e--,t++;break;case"E":t++;break;case"SE":e++,t++;break;case"S":e++;break;case"SW":e++,t--;break;case"W":t--}return{vIndex:e,hIndex:t}}},{key:"recursiveRowSearch",value:function(e,t,n,a){var r=this.getSiblings(e,t).find(function(e){return e.direction===n});return r&&r.value===this.state.myPlayer?(e=this.getNewItemIndexes(e,t,n).vIndex,t=this.getNewItemIndexes(e,t,n).hIndex,a.push([e,t]),this.recursiveRowSearch(e,t,n,a)):a}},{key:"getItemsInARow",value:function(e,t){var n=Object(E.a)(this.recursiveRowSearch(e,t,"E",[[e,t]])).concat(Object(E.a)(this.recursiveRowSearch(e,t,"W",[]))),a=Object(E.a)(this.recursiveRowSearch(e,t,"N",[[e,t]])).concat(Object(E.a)(this.recursiveRowSearch(e,t,"S",[]))),r=Object(E.a)(this.recursiveRowSearch(e,t,"NE",[[e,t]])).concat(Object(E.a)(this.recursiveRowSearch(e,t,"SW",[]))),o=Object(E.a)(this.recursiveRowSearch(e,t,"NW",[[e,t]])).concat(Object(E.a)(this.recursiveRowSearch(e,t,"SE",[])));return 5===n.length?n:5===a.length?a:5===r.length?r:5===o.length?o:[]}},{key:"togglePlayer",value:function(e,t){var n=this.state.grid;n[e][t]=this.state.myPlayer;var a=this.getItemsInARow(e,t);if(5===a.length)a.forEach(function(e){n[e[0]][e[1]]="win"}),this.setState(function(e){return{grid:n,matchStatus:"won"}}),this.socket.emit("won",this.state);else{var r=Object(k.a)({},this.state);r.grid=n,this.socket.emit("moved",r)}}},{key:"getSiblings",value:function(e,t){var n=this.state.grid,a=[];e<n.length-1&&n[e+1].forEach(function(e,n){n===t-1?a.push({value:e,direction:"SW"}):n===t?a.push({value:e,direction:"S"}):n===t+1&&a.push({value:e,direction:"SE"})});var r=[];n[e].forEach(function(e,n){n===t-1?r.push({value:e,direction:"W"}):n===t+1&&r.push({value:e,direction:"E"})});var o=[];return e>0&&n[e-1].forEach(function(e,n){n===t-1?o.push({value:e,direction:"NW"}):n===t?o.push({value:e,direction:"N"}):n===t+1&&o.push({value:e,direction:"NE"})}),a.concat(r,o)}},{key:"getIsUsable",value:function(e,t){if("won"===this.state.matchStatus||"lost"===this.state.matchStatus||this.state.myPlayer!==this.state.actualPlayer)return!1;var n=this.getSiblings(e,t);return n.some(function(e){return"O"===e.value})||n.some(function(e){return"X"===e.value})}},{key:"componentDidMount",value:function(){this.props.roomName?(console.log(this.props.roomName),this.socket.emit("register player",[window.innerWidth,window.innerHeight],this.props.roomName,"O"),this.setState(function(e){return{myPlayer:"O"}})):(this.socket.emit("register player",[window.innerWidth,window.innerHeight],null,"X"),this.setState(function(e){return{myPlayer:"X"}}))}},{key:"componentWillUnmount",value:function(){this.socket.emit("player will unregister",this.state)}},{key:"render",value:function(){var e=this;if(null===this.state.matchStatus)return r.a.createElement("div",null,"wait for the other player to join you roomName:",this.state.roomName);var t="Wait for your opponent's move...";return"won"===this.state.matchStatus?t="You WON!":"lost"===this.state.matchStatus?t="You LOST!":this.state.myPlayer===this.state.actualPlayer&&(t="Make your move!"),r.a.createElement("div",null,r.a.createElement("p",null,t),r.a.createElement(R,null,this.state.grid.map(function(t,n){return r.a.createElement(W,{key:n,rowHeight:e.state.grid.length},e.state.grid[n].map(function(t,a){return r.a.createElement(I,{cellHeight:e.state.grid.length,rowwidth:e.state.grid[n].length,vIndex:n,hIndex:a,key:a,status:e.state.grid[n][a],usable:e.getIsUsable(n,a),onCellClick:e.togglePlayer})}))})))}}]),t}(r.a.Component);function q(){var e=Object(d.a)(["\n  display: block;\n  align-text: center;\n"]);return q=function(){return e},e}var Y=v.a.div(q()),U=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Y,null,r.a.createElement(g.Helmet,null,r.a.createElement("title",null,"Play")),r.a.createElement(y.a,{to:"/"},"back"),r.a.createElement(H,{history:this.props.history,roomName:this.props.match.params.roomName}))}}]),t}(r.a.Component),X=function(){return r.a.createElement("div",null,r.a.createElement(g.Helmet,null,r.a.createElement("title",null,"Your opponent quitted")),r.a.createElement(b,{color:"blue"},"Your opponent quitted, start a new game "),r.a.createElement(y.a,{to:"/play"},"Start"))},A=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(p.a,{path:"/",exact:!0,component:w}),r.a.createElement(p.a,{path:"/play/",exact:!0,component:U}),r.a.createElement(p.a,{path:"/play/:roomName",exact:!0,component:U}),r.a.createElement(p.a,{path:"/quitted/",exact:!0,component:X})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[51,2,1]]]);
//# sourceMappingURL=main.da109c8c.chunk.js.map